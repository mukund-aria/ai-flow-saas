# INTEGRATION_WRIKE Step Type Definition
stepType: INTEGRATION_WRIKE
category: AUTOMATION
displayName: "Wrike"
description: "Create tasks in Wrike project management"

schema:
  events:
    - name: CREATE_TASK
      label: "Create Task"
      description: "Create a new task in a Wrike folder or project"

  fields:
    - name: title
      type: string
      required: true
      description: "Description of the Wrike action"

    - name: description
      type: string
      required: false
      description: "Additional context (coordinator-only)"

    - name: event
      type: enum
      required: true
      values: [CREATE_TASK]
      description: "Wrike action to perform"

    - name: connectionId
      type: connectionRef
      required: true
      provider: WRIKE
      description: "Wrike OAuth connection to use"

    - name: location
      type: dynamicSelect
      required: true
      source: "wrike.foldersAndProjects"
      description: "Wrike folder or project to create the task in"

    - name: taskTitle
      type: string
      required: true
      description: "Title of the task to create (supports DDR)"

    - name: taskDescription
      type: richText
      required: false
      description: "Task description content (supports DDR)"

    - name: assignee
      type: dynamicSelect
      required: false
      source: "wrike.users"
      description: "Wrike user to assign the task to"

    - name: dueDate
      type: date
      required: false
      description: "Task due date (supports DDR)"

    - name: inputs
      type: inputRef[]
      required: false
      description: "References to data from prior steps"

    - name: visibility.coordinatorOnly
      type: boolean
      required: false
      default: true

completion:
  autoCompletes: true
  noAssignee: true
  coordinatorOnly: true
  description: "Completes when the Wrike task is created"

outputs:
  - name: "taskId"
    type: string
    description: "ID of the created Wrike task"
  - name: "taskUrl"
    type: string
    description: "URL to the created Wrike task"

validationRules:
  - rule: "location is not empty"
    message: "A Wrike folder or project must be selected"
  - rule: "taskTitle is not empty"
    message: "Task title is required"

aiGuidance:
  whenToUse: |
    Use INTEGRATION_WRIKE to create tasks in Wrike as part of a flow.
    Examples: create follow-up work items, assign deliverables, track
    action items from approvals, create project tasks from form submissions.

  whenNotToUse: |
    - Creating tasks in ClickUp -> use INTEGRATION_CLICKUP
    - Internal to-do tracking -> use TODO step
    - Sending notifications -> use SYSTEM_EMAIL or INTEGRATION_GMAIL

  seQuestions:
    - "Which Wrike folder or project should the task go into?"
    - "What should the task title and description be?"
    - "Who should the task be assigned to?"
    - "Should the task have a due date?"

  defaults:
    - "CREATE_TASK event"
    - "No due date"
    - "No assignee"
    - "Coordinator-only visibility"

  examples:
    - trigger: "create Wrike task"
      mapsTo: INTEGRATION_WRIKE
    - trigger: "add task to Wrike"
      mapsTo: INTEGRATION_WRIKE
    - trigger: "assign in Wrike"
      mapsTo: INTEGRATION_WRIKE
    - trigger: "track in Wrike"
      mapsTo: INTEGRATION_WRIKE
