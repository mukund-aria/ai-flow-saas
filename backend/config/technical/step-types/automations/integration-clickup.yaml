# INTEGRATION_CLICKUP Step Type Definition
stepType: INTEGRATION_CLICKUP
category: AUTOMATION
displayName: "ClickUp"
description: "Create tasks in ClickUp"

schema:
  events:
    - name: CREATE_TASK
      label: "Create Task"
      description: "Create a new task in a ClickUp list"

  fields:
    - name: title
      type: string
      required: true
      description: "Description of the ClickUp action"

    - name: description
      type: string
      required: false
      description: "Additional context (coordinator-only)"

    - name: event
      type: enum
      required: true
      values: [CREATE_TASK]
      description: "ClickUp action to perform"

    - name: connectionId
      type: connectionRef
      required: true
      provider: CLICKUP
      description: "ClickUp OAuth connection to use"

    - name: team
      type: dynamicSelect
      required: true
      source: "clickup.teams"
      description: "ClickUp workspace (team)"

    - name: space
      type: dynamicSelect
      required: true
      source: "clickup.spaces"
      dependsOn: [team]
      description: "Space within the workspace"

    - name: folder
      type: dynamicSelect
      required: false
      source: "clickup.folders"
      dependsOn: [team, space]
      description: "Folder within the space (optional)"

    - name: list
      type: dynamicSelect
      required: true
      source: "clickup.lists"
      dependsOn: [team, space, folder]
      description: "List to create the task in"

    - name: taskName
      type: string
      required: true
      description: "Name of the task to create (supports DDR)"

    - name: taskDescription
      type: richText
      required: false
      description: "Task description content (supports DDR)"

    - name: dueDate
      type: date
      required: false
      description: "Task due date (supports DDR)"

    - name: assigneeEmail
      type: string
      required: false
      description: "Email of the ClickUp member to assign (supports DDR)"

    - name: inputs
      type: inputRef[]
      required: false
      description: "References to data from prior steps"

    - name: visibility.coordinatorOnly
      type: boolean
      required: false
      default: true

completion:
  autoCompletes: true
  noAssignee: true
  coordinatorOnly: true
  description: "Completes when the ClickUp task is created"

outputs:
  - name: "taskId"
    type: string
    description: "ID of the created ClickUp task"
  - name: "taskUrl"
    type: string
    description: "URL to the created ClickUp task"

validationRules:
  - rule: "team is not empty"
    message: "A ClickUp workspace must be selected"
  - rule: "space is not empty"
    message: "A ClickUp space must be selected"
  - rule: "list is not empty"
    message: "A ClickUp list must be selected"
  - rule: "taskName is not empty"
    message: "Task name is required"

aiGuidance:
  whenToUse: |
    Use INTEGRATION_CLICKUP to create tasks in ClickUp as part of a flow.
    Examples: create follow-up tasks, assign work items, track deliverables,
    create project tasks from form submissions.

  whenNotToUse: |
    - Creating tasks in Wrike -> use INTEGRATION_WRIKE
    - Internal to-do tracking -> use TODO step
    - Sending notifications -> use SYSTEM_EMAIL or INTEGRATION_GMAIL

  seQuestions:
    - "Which ClickUp workspace, space, and list should the task go into?"
    - "What should the task name and description be?"
    - "Should the task have a due date?"
    - "Who should the task be assigned to?"

  defaults:
    - "CREATE_TASK event"
    - "No due date"
    - "No assignee"
    - "Coordinator-only visibility"

  examples:
    - trigger: "create ClickUp task"
      mapsTo: INTEGRATION_CLICKUP
    - trigger: "add task to ClickUp"
      mapsTo: INTEGRATION_CLICKUP
    - trigger: "assign in ClickUp"
      mapsTo: INTEGRATION_CLICKUP
    - trigger: "track in ClickUp"
      mapsTo: INTEGRATION_CLICKUP
